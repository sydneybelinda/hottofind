{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{\"/p66\":function(e,t,a){\"use strict\";a.r(t);var n=a(\"ln6h\"),r=a.n(n),s=a(\"vYYK\"),i=a(\"Ji2X\"),o=a(\"5CWz\"),c=a(\"tRbT\"),u=a(\"kKAo\"),l=a(\"R/WZ\"),d=a(\"iuhU\"),p=a(\"q1tI\"),m=a.n(p),h=a(\"HIzg\"),g=a(\"vwXi\"),f=a(\"ojGB\"),v=a(\"0iUn\"),b=a(\"sLSF\"),y=a(\"MI3g\"),w=a(\"a7VT\"),x=a(\"AT/M\"),S=a(\"Tit0\"),C=a(\"ofer\"),j=a(\"r9w1\"),O=a(\"Z3vd\"),k=a(\"Hk+Y\"),P=a.n(k),N=a(\"nOHt\"),E=a.n(N),T=a(\"e2hQ\"),W=a(\"t+dt\"),I=a(\"a6RD\"),_=a.n(I),R=(a(\"obyI\"),m.a.createElement),H=_()((function(){return Promise.all([a.e(19),a.e(18),a.e(37)]).then(a.bind(null,\"uRSO\"))}),{ssr:!1,loadableGenerated:{webpack:function(){return[\"uRSO\"]},modules:[\"./profileFilePond\"]}}),U=function(e){function t(e){var a;Object(v.a)(this,t),a=Object(y.a)(this,Object(w.a)(t).call(this,e)),Object(s.a)(Object(x.a)(a),\"_handleChangeCountry\",(function(e){a.setState({cities:\"\"}),a.setState({country:e.target.value});var t,n=(t=e.target.value,a.props.citydata.filter((function(e){return e.countrycode===t}))),r=[];n.map((function(e){r.push({label:e.city,value:e.city.toLowerCase()})})),a.setState({citydata:r})})),Object(s.a)(Object(x.a)(a),\"_handleChangeCity\",(function(e){a.setState({city:e.target.value})})),Object(s.a)(Object(x.a)(a),\"handleSubmit\",(function(e){var t;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e.preventDefault(),a.setState({errors:\"\"}),t=[],a.ref1.getFiles().map((function(e){return e.file})).forEach((function(e){var n=e.name.split(\".\")[0],r=\"\".concat(n,\".jpg\");t.push({name:r,owner:a.props.user.username})})),a.handleSave;case 5:case\"end\":return n.stop()}}))})),Object(s.a)(Object(x.a)(a),\"handleSave\",(function(e){var t,n,s,i;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e.preventDefault(),a.setState({error:\"\"}),o.prev=2,o.next=5,r.a.awrap(W.k(a.state));case 5:if(200!==(t=o.sent).status){o.next=10;break}E.a.push(\"/profile\"),o.next=19;break;case 10:return console.log(\"Edit failed.\"),(n=new Error(t.statusText)).response=t,o.next=15,r.a.awrap(t.json());case 15:throw s=o.sent,i=s.errors[0].message,a.setState({error:i||n.message}),n;case 19:o.next=25;break;case 21:o.prev=21,o.t0=o.catch(2),console.error(\"You have an error in your code or there are Network issues.\",o.t0),o.t0.response;case 25:case\"end\":return o.stop()}}),null,null,[[2,21]])}));var n=a.props.userdata,i=[],o=[];if(a.props.citydata.map((function(e){-1===i.indexOf(e.countrycode)&&(i.push(e.countrycode),o.push({label:e.country,value:e.countrycode}))})),n.city){var c=[];a.props.citydata.map((function(e){c.push({label:e.city,value:e.city.toLowerCase()})}))}return a.ref1=m.a.createRef(),a.state=Object(s.a)({username:n.username,name:n.name||\"\",email:n.email||\"\",address1:n.address1||\"\",address2:n.address2||\"\",city:n.city||\"\",state:n.state||\"\",country:n.country||\"\",postcode:n.postcode||\"\",avatar:n.avatar||\"\",error:\"\",citydata:c||[],countries:o},\"error\",\"\"),a}return Object(S.a)(t,e),Object(b.a)(t,[{key:\"onUpdateFiles\",value:function(e){console.log(e)}},{key:\"render\",value:function(){var e=this,t=this.props.user,a=(this.props.post,this.props.classes);return R(m.a.Fragment,null,R(\"form\",{noValidate:!0,onSubmit:this.handleSave},R(c.a,{container:!0,spacing:3},R(c.a,{item:!0,xs:12,sm:3},\"Photo\",R(\"div\",{style:{backgroundImage:\"url('\".concat(t.avatar,\"')\"),backgroundSize:\"cover\",backgroundPosition:\"center top\",maxHeight:\"490px\",minHeight:\"310px\"}},R(H,{onupdatefiles:this.onUpdateFiles.bind(this),setRef:function(t){return e.ref1=t},handleUploadImages:this.handleUploadImages,user:this.props.userdata}))),R(c.a,{item:!0,xs:12,sm:9},R(c.a,{container:!0,spacing:3},R(c.a,{item:!0,xs:12,sm:12},R(C.a,{variant:\"h6\",gutterBottom:!0},\"Update Personal Details\")),R(c.a,{item:!0,xs:12,sm:6},R(j.a,{required:!0,id:\"name\",name:\"name\",label:\"Name\",fullWidth:!0,autoComplete:\"name\",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),R(c.a,{item:!0,xs:12,sm:6},R(j.a,{required:!0,id:\"email\",name:\"email\",label:\"Email Address\",fullWidth:!0,autoComplete:\"email\",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})}})),R(c.a,{item:!0,xs:12,sm:6},R(j.a,{required:!0,id:\"address1\",name:\"address1\",label:\"Address line 1\",fullWidth:!0,autoComplete:\"billing address-line1\",value:this.state.address1,onChange:function(t){return e.setState({address1:t.target.value})}})),R(c.a,{item:!0,xs:12,sm:6},R(j.a,{id:\"address2\",name:\"address2\",label:\"Address line 2\",fullWidth:!0,autoComplete:\"address2\",value:this.state.address2,onChange:function(t){return e.setState({address2:t.target.value})}})),R(c.a,{item:!0,xs:12,sm:6},R(T.a,{options:this.state.countries,value:this.state.country,placeholder:\"Country\",name:\"country\",onChange:this._handleChangeCountry})),R(c.a,{item:!0,xs:12,sm:6},R(T.a,{options:this.state.citydata,value:this.state.city,placeholder:\"City\",name:\"city\",onChange:function(t){return e.setState({city:t.target.value})}})),R(c.a,{item:!0,xs:12,sm:6},R(j.a,{id:\"state\",name:\"state\",label:\"State/Province/Region\",fullWidth:!0,value:this.state.state,onChange:function(t){return e.setState({state:t.target.value})}})),R(c.a,{item:!0,xs:12,sm:6},R(j.a,{required:!0,id:\"postcode\",name:\"postcode\",label:\"Zip / Postal code\",fullWidth:!0,autoComplete:\"postcode\",value:this.state.postcode,onChange:function(t){return e.setState({postcode:t.target.value})}}))),R(c.a,{item:!0,xs:12},R(O.a,{type:\"submit\",fullWidth:!0,variant:\"contained\",color:\"primary\",className:a.submit},\"Submit\")))),this.state.error?R(\"p\",{className:\"error\"},\"Error: \",this.state.error):\"\"))}}]),t}(m.a.Component),D=P()((function(e){return{\"@global\":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:\"100%\",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}))(U),F=a(\"SMlj\"),q=m.a.createElement,A=Object(l.a)((function(e){return{root:{display:\"flex\"},drawerPaper:{position:\"relative\",whiteSpace:\"nowrap\",width:240,transition:e.transitions.create(\"width\",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(s.a)({overflowX:\"hidden\",transition:e.transitions.create(\"width\",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up(\"sm\"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:\"100vh\",overflow:\"auto\"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:\"flex\",overflow:\"auto\",flexDirection:\"column\"},paperCust:{padding:\"24px\"},fixedHeight:{height:240}}})),B=function(e){e.data;var t=A();Object(d.default)(t.paper,t.fixedHeight);return q(f.a,{user:e.user,categories:e.cat},q(\"div\",{className:t.root},q(o.a,null),q(g.a,null),q(\"main\",{className:t.content},q(\"div\",{className:t.appBarSpacer}),q(i.a,{maxWidth:\"lg\",className:t.container},q(\"h1\",null,\"Edit Profile\"),q(c.a,{container:!0,spacing:3},q(c.a,{item:!0,xs:12,md:12,lg:12},q(u.a,{className:t.paperCust},q(D,{userdata:e.userdata,user:e.user,categories:e.categories,citydata:e.citydata}))))),q(h.a,null))))};B.getInitialProps=function(e){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(W.a(e));case 2:if(!(t=n.sent)){n.next=8;break}return n.next=6,r.a.awrap(W.e());case 6:return a=n.sent,n.abrupt(\"return\",{userdata:t,citydata:a});case 8:case\"end\":return n.stop()}}))};t.default=Object(F.d)(B)},\"o+Go\":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/dashboard/editprofile\",function(){return a(\"/p66\")}])}},[[\"o+Go\",0,2,1,38,39,40,41,42,43,45,47,48]]]);"}