{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nvar _jsxFileName = \"C:\\\\src\\\\hottofindtest\\\\pages\\\\login.js\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport { login } from '../utils/auth';\nimport fetch from 'isomorphic-unfetch';\n\nfunction Copyright() {\n  return __jsx(Typography, {\n    variant: \"body2\",\n    color: \"textSecondary\",\n    align: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20\n    },\n    __self: this\n  }, 'Copyright © ', __jsx(Link, {\n    color: \"inherit\",\n    href: \"https://material-ui.com/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22\n    },\n    __self: this\n  }, \"Your Website\"), ' ', new Date().getFullYear(), '.');\n}\n\nvar useStyles = makeStyles(function (theme) {\n  return {\n    '@global': {\n      body: {\n        backgroundColor: theme.palette.common.white\n      }\n    },\n    paper: {\n      marginTop: theme.spacing(8),\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center'\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.secondary.main\n    },\n    form: {\n      width: '100%',\n      // Fix IE 11 issue.\n      marginTop: theme.spacing(1)\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2)\n    }\n  };\n});\n\nfunction Login() {\n  var _jsx, _jsx2;\n\n  var classes = useStyles();\n\n  var _useState = useState({\n    username: '',\n    password: '',\n    error: ''\n  }),\n      userData = _useState[0],\n      setUserData = _useState[1];\n\n  function handleSubmit(event) {\n    var username, password, url, response, _ref, token, res, error;\n\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            event.preventDefault();\n            setUserData(_Object$assign({}, userData, {\n              error: ''\n            }));\n            username = userData.username;\n            password = userData.password; // const url = '/api/login'\n\n            url = '/api/auth/signin';\n            _context.prev = 5;\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(fetch(url, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: _JSON$stringify({\n                username: username,\n                password: password\n              })\n            }));\n\n          case 8:\n            response = _context.sent;\n\n            if (!(response.status === 200)) {\n              _context.next = 18;\n              break;\n            }\n\n            _context.next = 12;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 12:\n            _ref = _context.sent;\n            token = _ref.token;\n            _context.next = 16;\n            return _regeneratorRuntime.awrap(login({\n              token: token\n            }));\n\n          case 16:\n            _context.next = 24;\n            break;\n\n          case 18:\n            console.log('Login failed.');\n            _context.next = 21;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 21:\n            res = _context.sent;\n            // https://github.com/developit/unfetch#caveats\n            // let error = new Error(response.statusText)\n            // let error = new Error(response.json())\n            error = res.response; //   error.response = res.response\n\n            throw error;\n\n          case 24:\n            _context.next = 30;\n            break;\n\n          case 26:\n            _context.prev = 26;\n            _context.t0 = _context[\"catch\"](5);\n            console.error('You have an error in your code or there are Network issues.', _context.t0);\n            setUserData(_Object$assign({}, userData, {\n              error: _context.t0\n            }));\n\n          case 30:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[5, 26]]);\n  }\n\n  return __jsx(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, __jsx(CssBaseline, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: classes.paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, __jsx(Avatar, {\n    className: classes.avatar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, __jsx(LockOutlinedIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  })), __jsx(Typography, {\n    component: \"h1\",\n    variant: \"h5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, \"Sign in\"), __jsx(\"form\", {\n    className: classes.form,\n    noValidate: true,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, __jsx(TextField, (_jsx = {\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    name: \"username\",\n    value: userData.username,\n    onChange: function onChange(event) {\n      return setUserData(_Object$assign({}, userData, {\n        username: event.target.value\n      }));\n    },\n    label: \"Username\"\n  }, _defineProperty(_jsx, \"name\", \"email\"), _defineProperty(_jsx, \"autoComplete\", \"username\"), _defineProperty(_jsx, \"autoFocus\", true), _defineProperty(_jsx, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 125\n  }), _defineProperty(_jsx, \"__self\", this), _jsx)), __jsx(TextField, (_jsx2 = {\n    variant: \"outlined\",\n    margin: \"normal\",\n    required: true,\n    fullWidth: true,\n    id: \"password\",\n    name: \"password\",\n    value: userData.password,\n    onChange: function onChange(event) {\n      return setUserData(_Object$assign({}, userData, {\n        password: event.target.value\n      }));\n    },\n    placeholder: \"Password\"\n  }, _defineProperty(_jsx2, \"required\", true), _defineProperty(_jsx2, \"label\", \"Password\"), _defineProperty(_jsx2, \"type\", \"password\"), _defineProperty(_jsx2, \"autoComplete\", \"current-password\"), _defineProperty(_jsx2, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 142\n  }), _defineProperty(_jsx2, \"__self\", this), _jsx2)), __jsx(FormControlLabel, {\n    control: __jsx(Checkbox, {\n      value: \"remember\",\n      color: \"primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }),\n    label: \"Remember me\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }), __jsx(Button, {\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.submit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"Sign In\"), __jsx(Grid, {\n    container: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    xs: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: \"#\",\n    variant: \"body2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, \"Forgot password?\")), __jsx(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, __jsx(Link, {\n    href: \"/register\",\n    variant: \"body2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, \"Don't have an account? Sign Up\"))), userData.error && __jsx(\"p\", {\n    className: \"error\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, \"Error: \", userData.error))), __jsx(Box, {\n    mt: 8,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, __jsx(Copyright, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  })));\n}\n\nexport default Login;","map":{"version":3,"sources":["C:/src/hottofindtest/pages/login.js"],"names":["React","useState","Avatar","Button","CssBaseline","TextField","FormControlLabel","Checkbox","Link","Grid","Box","LockOutlinedIcon","Typography","makeStyles","Container","login","fetch","Copyright","Date","getFullYear","useStyles","theme","body","backgroundColor","palette","common","white","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","secondary","main","form","width","submit","Login","classes","username","password","error","userData","setUserData","handleSubmit","event","preventDefault","url","method","headers","response","status","json","token","console","log","res","target","value"],"mappings":"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","sourcesContent":["import React, { useState }  from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport Link from '@material-ui/core/Link';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Container from '@material-ui/core/Container';\r\nimport { login } from '../utils/auth'\r\nimport fetch from 'isomorphic-unfetch'\r\n\r\nfunction Copyright() {\r\n  return (\r\n    <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\r\n      {'Copyright © '}\r\n      <Link color=\"inherit\" href=\"https://material-ui.com/\">\r\n        Your Website\r\n      </Link>{' '}\r\n      {new Date().getFullYear()}\r\n      {'.'}\r\n    </Typography>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  '@global': {\r\n    body: {\r\n      backgroundColor: theme.palette.common.white,\r\n    },\r\n  },\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  form: {\r\n    width: '100%', // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}));\r\n\r\nfunction Login() {\r\n  const classes = useStyles();\r\n  const [userData, setUserData] = useState({ username: '', password:'', error: '' })\r\n\r\n  async function handleSubmit (event) {\r\n    event.preventDefault()\r\n    setUserData(Object.assign({}, userData, { error: '' }))\r\n\r\n    const username = userData.username\r\n    const password = userData.password\r\n    // const url = '/api/login'\r\n    const url = '/api/auth/signin'\r\n\r\n    try {\r\n      const response = await fetch(url, {\r\n        method: 'POST',\r\n\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ username, password })\r\n      })\r\n      if (response.status === 200) {\r\n        const { token } = await response.json()\r\n       \r\n       // console.log(token)\r\n\r\n       // console.log(token)\r\n        await login({ token })\r\n      } else {\r\n        console.log('Login failed.')\r\n\r\n        const res = await response.json()\r\n\r\n    \r\n        // https://github.com/developit/unfetch#caveats\r\n        // let error = new Error(response.statusText)\r\n       // let error = new Error(response.json())\r\n       let error = res.response\r\n     //   error.response = res.response\r\n        throw error\r\n      }\r\n    } catch (error) {\r\n      console.error(\r\n        'You have an error in your code or there are Network issues.',\r\n        error\r\n      )\r\n\r\n     \r\n\r\n      setUserData(\r\n        Object.assign({}, userData, {\r\n          error: error\r\n        })\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"xs\">\r\n      <CssBaseline />\r\n      <div className={classes.paper}>\r\n        <Avatar className={classes.avatar}>\r\n          <LockOutlinedIcon />\r\n        </Avatar>\r\n        <Typography component=\"h1\" variant=\"h5\">\r\n          Sign in\r\n        </Typography>\r\n        <form className={classes.form} noValidate\r\n        onSubmit={handleSubmit}\r\n        >\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name='username'\r\n            value={userData.username}\r\n            onChange={event =>\r\n              setUserData(\r\n                Object.assign({}, userData, { username: event.target.value })\r\n              )\r\n            }\r\n            label=\"Username\"\r\n            name=\"email\"\r\n            autoComplete=\"username\"\r\n            autoFocus\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            id='password'\r\n            name=\"password\"\r\n            value={userData.password}\r\n            onChange={event =>\r\n              setUserData(\r\n                Object.assign({}, userData, { password: event.target.value })\r\n              )\r\n            }\r\n                placeholder=\"Password\"\r\n                required\r\n            label=\"Password\"\r\n            type=\"password\"\r\n\r\n            autoComplete=\"current-password\"\r\n          />\r\n          <FormControlLabel\r\n            control={<Checkbox value=\"remember\" color=\"primary\" />}\r\n            label=\"Remember me\"\r\n          />\r\n          <Button\r\n            type=\"submit\"\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            className={classes.submit}\r\n          >\r\n            Sign In\r\n          </Button>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              <Link href=\"#\" variant=\"body2\">\r\n                Forgot password?\r\n              </Link>\r\n            </Grid>\r\n            <Grid item>\r\n              <Link href=\"/register\" variant=\"body2\">\r\n                {\"Don't have an account? Sign Up\"}\r\n              </Link>\r\n            </Grid>\r\n          </Grid>\r\n          {userData.error && <p className='error'>Error: {userData.error}</p>}\r\n        </form>\r\n      </div>\r\n      <Box mt={8}>\r\n        <Copyright />\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}