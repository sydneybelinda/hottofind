{"ast":null,"code":"import { Post } from '../../../models';\nimport { File } from '../../../models';\nexport default (async (req, res) => {\n  const {\n    query: {\n      countrycode\n    }\n  } = req;\n  let where = {\n    country: countrycode\n  };\n\n  try {\n    const posts = await Post.findAll({\n      where: where,\n      include: [{\n        model: File,\n        as: 'files'\n      }],\n      order: [['createdAt', 'DESC']],\n      limit: 40\n    });\n\n    if (!posts) {\n      return res.status(404).send({\n        message: '404 posts'\n      });\n    }\n\n    return res.status(200).send(posts); // return res.json({ categories });\n  } catch (err) {\n    console.log(err);\n    return res.status(500).send(err);\n  }\n});","map":{"version":3,"sources":["C:/src/hottofindtest/pages/api/posts/test.js"],"names":["Post","File","req","res","query","countrycode","where","country","posts","findAll","include","model","as","order","limit","status","send","message","err","console","log"],"mappings":"AAAA,SAASA,IAAT,QAAqB,iBAArB;AACA,SAASC,IAAT,QAAqB,iBAArB;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAEjC,QAAM;AACJC,IAAAA,KAAK,EAAE;AAAEC,MAAAA;AAAF;AADH,MAEFH,GAFJ;AAIA,MAAII,KAAK,GAAG;AACVC,IAAAA,OAAO,EAAEF;AADC,GAAZ;;AAIE,MAAI;AACA,UAAMG,KAAK,GAAG,MAAMR,IAAI,CAACS,OAAL,CAAa;AAC/BH,MAAAA,KAAK,EAAEA,KADwB;AAE7BI,MAAAA,OAAO,EAAE,CACL;AACEC,QAAAA,KAAK,EAAEV,IADT;AAECW,QAAAA,EAAE,EAAE;AAFL,OADK,CAFoB;AAQ1BC,MAAAA,KAAK,EAAE,CAAC,CAAC,WAAD,EAAc,MAAd,CAAD,CARmB;AAS1BC,MAAAA,KAAK,EAAE;AATmB,KAAb,CAApB;;AAYA,QAAI,CAACN,KAAL,EAAY;AACV,aAAOL,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BC,QAAAA,OAAO,EAAE;AADiB,OAArB,CAAP;AAGD;;AAED,WAAOd,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBR,KAArB,CAAP,CAnBA,CAoBF;AACC,GArBH,CAqBI,OAAOU,GAAP,EAAY;AACVC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACF,WAAOf,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBE,GAArB,CAAP;AACD;AACJ,CAnCH","sourcesContent":["import { Post } from '../../../models';\r\nimport { File } from '../../../models';\r\n\r\nexport default async (req, res) => {\r\n\r\n  const {\r\n    query: { countrycode },\r\n  } = req\r\n\r\n  let where = {\r\n    country: countrycode,\r\n  }\r\n\r\n    try {\r\n        const posts = await Post.findAll({\r\n          where: where,\r\n            include: [\r\n                {\r\n                  model: File,\r\n                 as: 'files'\r\n               }\r\n              ],\r\n               order: [['createdAt', 'DESC']],\r\n               limit: 40,\r\n        });\r\n\r\n        if (!posts) {\r\n          return res.status(404).send({\r\n            message: '404 posts',\r\n          });\r\n        }\r\n  \r\n        return res.status(200).send(posts);\r\n      // return res.json({ categories });\r\n      } catch (err) {\r\n          console.log(err)\r\n        return res.status(500).send(err);\r\n      }\r\n  }"]},"metadata":{},"sourceType":"module"}