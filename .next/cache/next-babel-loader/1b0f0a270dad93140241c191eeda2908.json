{"ast":null,"code":"var fs = require('fs');\n\nimport formidable from \"formidable\";\nexport default (async (req, res) => {\n  // for the pipe to work, we need to disable \"bodyParser\" (see below)\n  const form = new formidable.IncomingForm();\n  form.parse(req, function (err, fields, files) {\n    console.log(files.file);\n    const uploadedFile = files.file.path;\n    const fileName = files.file.name;\n    fs.rename(uploadedFile, `public/uploadedimages/${fileName}`, function (err) {\n      if (err) {\n        return res.status(500).send(err);\n      }\n\n      return res.status(200).send(`public/uploadedimages/${fileName}`);\n    }); // uploadedFile.mv(\n    //   `public/uploadedimages/${fileName}`,\n    //   function (err) {\n    //     if (err) {\n    //       return res.status(500).send(err)\n    //     }\n    //     res.json({\n    //       file: `public/${files.file.name}`,\n    //     })\n    //   }\n    // )\n  });\n});\nexport const config = {\n  api: {\n    bodyParser: false\n  }\n};","map":{"version":3,"sources":["C:/src/hottofindtest/pages/api/dashboard/file/postupload.js"],"names":["fs","require","formidable","req","res","form","IncomingForm","parse","err","fields","files","console","log","file","uploadedFile","path","fileName","name","rename","status","send","config","api","bodyParser"],"mappings":"AAAA,IAAIA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAhB;;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/B;AAEA,QAAMC,IAAI,GAAG,IAAIH,UAAU,CAACI,YAAf,EAAb;AACAD,EAAAA,IAAI,CAACE,KAAL,CAAWJ,GAAX,EAAgB,UAASK,GAAT,EAAcC,MAAd,EAAsBC,KAAtB,EAA6B;AAEjDC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,IAAlB;AAEM,UAAMC,YAAY,GAAGJ,KAAK,CAACG,IAAN,CAAWE,IAAhC;AACA,UAAMC,QAAQ,GAAGN,KAAK,CAACG,IAAN,CAAWI,IAA5B;AAEAjB,IAAAA,EAAE,CAACkB,MAAH,CAAUJ,YAAV,EAAyB,yBAAwBE,QAAS,EAA1D,EAA6D,UAAUR,GAAV,EAAe;AAC1E,UAAIA,GAAJ,EAAS;AACP,eAAOJ,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBZ,GAArB,CAAP;AACD;;AAED,aAAOJ,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAsB,yBAAwBJ,QAAS,EAAvD,CAAP;AACH,KANC,EAP2C,CAe3C;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACD,GA5BD;AA6BH,CAjCD;AAkCA,OAAO,MAAMK,MAAM,GAAG;AAClBC,EAAAA,GAAG,EAAE;AACDC,IAAAA,UAAU,EAAE;AADX;AADa,CAAf","sourcesContent":["var fs = require('fs');\r\nimport formidable from \"formidable\";\r\nexport default async (req, res) => {\r\n    // for the pipe to work, we need to disable \"bodyParser\" (see below)\r\n\r\n    const form = new formidable.IncomingForm();\r\n    form.parse(req, function(err, fields, files) {\r\n\r\nconsole.log(files.file)\r\n\r\n      const uploadedFile = files.file.path\r\n      const fileName = files.file.name\r\n\r\n      fs.rename(uploadedFile, `public/uploadedimages/${fileName}`, function (err) {\r\n        if (err) {\r\n          return res.status(500).send(err)\r\n        }\r\n  \r\n        return res.status(200).send(`public/uploadedimages/${fileName}`);\r\n    });\r\n\r\n      // uploadedFile.mv(\r\n      //   `public/uploadedimages/${fileName}`,\r\n      //   function (err) {\r\n         \r\n      //     if (err) {\r\n      //       return res.status(500).send(err)\r\n      //     }\r\n    \r\n      //     res.json({\r\n      //       file: `public/${files.file.name}`,\r\n      //     })\r\n      //   }\r\n      // )\r\n    });\r\n};\r\nexport const config = {\r\n    api: {\r\n        bodyParser: false,\r\n    },\r\n};"]},"metadata":{},"sourceType":"module"}