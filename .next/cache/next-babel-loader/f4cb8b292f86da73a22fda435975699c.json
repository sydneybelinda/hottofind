{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\src\\\\hottofindtest\\\\components\\\\dashboard\\\\filePond.js\";\nvar __jsx = React.createElement;\n// Import React FilePond\nimport React, { useState, useEffect } from \"react\";\nimport { FilePond, registerPlugin } from \"react-filepond\"; // Import FilePond styles\n\nimport \"filepond/dist/filepond.min.css\";\nimport FilePondPluginFileRename from \"filepond-plugin-file-rename\";\nimport FilePondPluginFileValidateSize from \"filepond-plugin-file-validate-size\";\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type\";\nimport FilePondPluginImageCrop from \"filepond-plugin-image-crop\"; // Import the Image EXIF Orientation and Image Preview plugins\n// Note: These need to be installed separately\n\nimport FilePondPluginImageExifOrientation from \"filepond-plugin-image-exif-orientation\";\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview\";\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css\";\nimport FilePondPluginImageResize from \"filepond-plugin-image-resize\";\nimport FilePondPluginImageTransform from \"filepond-plugin-image-transform\";\nimport FilePondPluginImageValidateSize from \"filepond-plugin-image-validate-size\";\nimport * as Queries from '../../utils/queries';\nimport { URL } from \"../../config\"; // Register the plugins\n\nregisterPlugin(FilePondPluginImageExifOrientation, FilePondPluginImagePreview, FilePondPluginImageResize, FilePondPluginFileRename, FilePondPluginFileValidateSize, FilePondPluginFileValidateType, FilePondPluginImageCrop, FilePondPluginImageValidateSize, FilePondPluginImageTransform); // Our app\n\nclass FileUploader extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"componentDidMount\", () => {\n      if (this.props.files) {\n        var files = [];\n        this.props.files.map(file => {\n          files.push({\n            source: `${URL}/uploadedimages/${file.name}`,\n            options: {\n              type: \"local\"\n            }\n          });\n        });\n        this.setState({\n          files: files\n        });\n      }\n    });\n\n    _defineProperty(this, \"makeid\", length => {\n      var result = \"\";\n      var characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n      var charactersLength = characters.length;\n\n      for (var i = 0; i < length; i++) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n      }\n\n      return result;\n    });\n\n    this.state = {\n      // Set initial files, type 'local' means this is a file\n      // that has already been uploaded to the server (see docs)\n      //  files: [\n      //     {\n      //       source: `${URL}/public/uploadedfiles/${this.props.files.name}`,\n      //       options: {\n      //         type: \"local\"\n      //       }\n      //     }\n      //  ]\n      files: []\n    };\n  }\n\n  handleInit() {\n    console.log(\"FilePond instance has initialised\", this.pond);\n  }\n\n  render() {\n    var n;\n    return __jsx(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, __jsx(FilePond, {\n      ref: this.props.setRef,\n      files: this.state.files,\n      allowMultiple: true,\n      name: \"file\",\n      maxFiles: 10 //  server=\"/api/dashboard/file/postupload\"\n      // server=\"/api/uploadpostfile\"\n      // server= {{\n      //     process: '/api/dashboard/file/postupload',\n      //     fetch: null,\n      //     revert: null\n      // }}\n      ,\n      server: {\n        process: \"/api/dashboard/file/postupload\",\n        load: (source, load) => {\n          // simulates loading a file from the server\n          fetch(source).then(res => res.blob()).then(load);\n        },\n        remove: (source, load, error) => {\n          var name = source.replace(`${URL}/uploadedimages/`, ''); // Should somehow send `source` to server so server can remove the file with this source\n\n          Queries.deleteFile(name); // Can call the error method if something is wrong, should exit after\n\n          error('oh my goodness'); // Should call the load method when done, no parameters required\n\n          load();\n        }\n      },\n      imageResizeMode: \"cover\",\n      allowImageTransform: true,\n      allowImageCrop: true,\n      imageCropAspectRatio: \"1:1\",\n      oninit: () => this.handleInit(),\n      imageTransformOutputQuality: 65,\n      imageTransformOutputMimeType: \"image/jpeg\",\n      fileRenameFunction: file => {\n        n = this.makeid(25);\n        return n + file.extension;\n      },\n      onupdatefiles: fileItems => {\n        //this.props.onupdatefiles({ files: fileItems.map(fileItem => fileItem.file) });\n        this.setState({\n          files: fileItems.map(fileItem => fileItem.file)\n        });\n      } // onupdatefiles={this.props.onupdatefiles }\n      ,\n      onDrop: this.props.handleUploadImages,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default FileUploader;","map":{"version":3,"sources":["C:/src/hottofindtest/components/dashboard/filePond.js"],"names":["React","useState","useEffect","FilePond","registerPlugin","FilePondPluginFileRename","FilePondPluginFileValidateSize","FilePondPluginFileValidateType","FilePondPluginImageCrop","FilePondPluginImageExifOrientation","FilePondPluginImagePreview","FilePondPluginImageResize","FilePondPluginImageTransform","FilePondPluginImageValidateSize","Queries","URL","FileUploader","Component","constructor","props","files","map","file","push","source","name","options","type","setState","length","result","characters","charactersLength","i","charAt","Math","floor","random","state","handleInit","console","log","pond","render","n","setRef","process","load","fetch","then","res","blob","remove","error","replace","deleteFile","makeid","extension","fileItems","fileItem","handleUploadImages"],"mappings":"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","sourcesContent":["// Import React FilePond\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { FilePond, registerPlugin } from \"react-filepond\";\r\n\r\n// Import FilePond styles\r\nimport \"filepond/dist/filepond.min.css\";\r\n\r\nimport FilePondPluginFileRename from \"filepond-plugin-file-rename\";\r\nimport FilePondPluginFileValidateSize from \"filepond-plugin-file-validate-size\";\r\nimport FilePondPluginFileValidateType from \"filepond-plugin-file-validate-type\";\r\nimport FilePondPluginImageCrop from \"filepond-plugin-image-crop\";\r\n// Import the Image EXIF Orientation and Image Preview plugins\r\n// Note: These need to be installed separately\r\nimport FilePondPluginImageExifOrientation from \"filepond-plugin-image-exif-orientation\";\r\nimport FilePondPluginImagePreview from \"filepond-plugin-image-preview\";\r\nimport \"filepond-plugin-image-preview/dist/filepond-plugin-image-preview.css\";\r\nimport FilePondPluginImageResize from \"filepond-plugin-image-resize\";\r\nimport FilePondPluginImageTransform from \"filepond-plugin-image-transform\";\r\nimport FilePondPluginImageValidateSize from \"filepond-plugin-image-validate-size\";\r\n\r\nimport * as Queries from '../../utils/queries'\r\n\r\n\r\nimport { URL } from \"../../config\";\r\n\r\n// Register the plugins\r\nregisterPlugin(\r\n  FilePondPluginImageExifOrientation,\r\n  FilePondPluginImagePreview,\r\n  FilePondPluginImageResize,\r\n  FilePondPluginFileRename,\r\n  FilePondPluginFileValidateSize,\r\n  FilePondPluginFileValidateType,\r\n  FilePondPluginImageCrop,\r\n  FilePondPluginImageValidateSize,\r\n  FilePondPluginImageTransform\r\n);\r\n\r\n// Our app\r\nclass FileUploader extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      // Set initial files, type 'local' means this is a file\r\n      // that has already been uploaded to the server (see docs)\r\n      //  files: [\r\n      //     {\r\n      //       source: `${URL}/public/uploadedfiles/${this.props.files.name}`,\r\n      //       options: {\r\n      //         type: \"local\"\r\n      //       }\r\n      //     }\r\n      //  ]\r\n      files: []\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    if (this.props.files) {\r\n      var files = [];\r\n      this.props.files.map(file => {\r\n        files.push({\r\n          source: `${URL}/uploadedimages/${file.name}`,\r\n          options: {\r\n            type: \"local\"\r\n          }\r\n        });\r\n      });\r\n\r\n      this.setState({ files: files });\r\n    }\r\n  };\r\n\r\n  handleInit() {\r\n    console.log(\"FilePond instance has initialised\", this.pond);\r\n  }\r\n\r\n  makeid = length => {\r\n    var result = \"\";\r\n    var characters =\r\n      \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n    var charactersLength = characters.length;\r\n    for (var i = 0; i < length; i++) {\r\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n    }\r\n    return result;\r\n  };\r\n\r\n  render() {\r\n    var n;\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        {/* Pass FilePond properties as attributes */}\r\n        {/* <FilePond ref={ref => this.pond = ref}\r\n                          files={this.state.files}\r\n                          allowMultiple={true}\r\n                          maxFiles={10} \r\n                          name={\"file\"}\r\n                          fileRenameFunction={file => {\r\n                            n = this.makeid(25);\r\n                            return n + file.extension;\r\n                          }}\r\n                          server=\"/api/uploadpostfile\"\r\n                          oninit={() => this.handleInit() }\r\n                        onupdatefiles={this.props.onupdatefiles }>\r\n                </FilePond> */}\r\n        <FilePond\r\n          ref={this.props.setRef}\r\n          files={this.state.files}\r\n          allowMultiple={true}\r\n          name={\"file\"}\r\n          maxFiles={10}\r\n        //  server=\"/api/dashboard/file/postupload\"\r\n         // server=\"/api/uploadpostfile\"\r\n\r\n         \r\n          // server= {{\r\n          //     process: '/api/dashboard/file/postupload',\r\n          //     fetch: null,\r\n          //     revert: null\r\n          // }}\r\n      \r\n\r\n          server={{\r\n            process: \"/api/dashboard/file/postupload\",\r\n            \r\n            load: (source, load) => {\r\n                // simulates loading a file from the server\r\n                fetch(source).then(res => res.blob()).then(load);\r\n            },\r\n            remove: (source, load, error) => {\r\n\r\n              var name = source.replace(`${URL}/uploadedimages/`, '')            \r\n            \r\n              // Should somehow send `source` to server so server can remove the file with this source\r\n              Queries.deleteFile(name)\r\n              // Can call the error method if something is wrong, should exit after\r\n              error('oh my goodness');\r\n  \r\n              // Should call the load method when done, no parameters required\r\n              load();\r\n          }\r\n          }}\r\n          imageResizeMode=\"cover\"\r\n          allowImageTransform={true}\r\n          allowImageCrop={true}\r\n          imageCropAspectRatio={\"1:1\"}\r\n          oninit={() => this.handleInit()}\r\n          imageTransformOutputQuality={65}\r\n          imageTransformOutputMimeType=\"image/jpeg\"\r\n          fileRenameFunction={file => {\r\n            n = this.makeid(25);\r\n            return n + file.extension;\r\n          }}\r\n          onupdatefiles={fileItems => {\r\n            //this.props.onupdatefiles({ files: fileItems.map(fileItem => fileItem.file) });\r\n             this.setState({ files: fileItems.map(fileItem => fileItem.file) });\r\n          }}\r\n          // onupdatefiles={this.props.onupdatefiles }\r\n          onDrop={this.props.handleUploadImages}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FileUploader;\r\n"]},"metadata":{},"sourceType":"module"}