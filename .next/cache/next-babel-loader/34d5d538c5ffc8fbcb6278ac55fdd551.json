{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\src\\\\hottofindtest\\\\pages\\\\posts\\\\[...slug].js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useRouter } from \"next/router\";\nimport Container from \"@material-ui/core/Container\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Link from \"@material-ui/core/Link\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport React, { useState } from 'react';\nimport Layout from \"../../components/layout\";\nimport PostAccordian from \"../../components/postAccordian\";\nimport Breadcrumbs from \"../../components/breadcrumbs\";\nimport PostPreview from \"../../components/postPreview\";\nimport LocationMenu from \"../../components/LocationMenu\";\nimport { withAuth } from \"../../utils/auth\";\nimport config from \"../../config\";\nvar useStyles = makeStyles(function (theme) {\n  var _subtext, _left, _right;\n\n  return {\n    toolbar: {\n      borderBottom: \"1px solid \".concat(theme.palette.divider)\n    },\n    toolbarTitle: {\n      flex: 1\n    },\n    toolbarSecondary: {\n      justifyContent: \"space-between\",\n      overflowX: \"auto\"\n    },\n    toolbarLink: {\n      padding: theme.spacing(1),\n      flexShrink: 0\n    },\n    sitename: _defineProperty({\n      fontSize: \"46px\",\n      lineHeight: \"40px\",\n      marginBottom: \"0\"\n    }, theme.breakpoints.down(\"md\"), {\n      fontSize: \"30px\",\n      lineHeight: \"35px\"\n    }),\n    mainFeaturedPost: {\n      position: \"relative\",\n      backgroundColor: theme.palette.grey[800],\n      color: theme.palette.common.white,\n      marginBottom: 0,\n      backgroundImage: \"url(https://source.unsplash.com/user/erondu)\",\n      backgroundSize: \"cover\",\n      backgroundRepeat: \"no-repeat\",\n      backgroundPosition: \"center\"\n    },\n    overlay: {\n      position: \"absolute\",\n      top: 0,\n      bottom: 0,\n      right: 0,\n      left: 0,\n      backgroundColor: \"rgba(0,0,0,.3)\"\n    },\n    mainFeaturedPostContent: _defineProperty({\n      position: \"relative\",\n      padding: theme.spacing(3)\n    }, theme.breakpoints.up(\"md\"), {\n      padding: theme.spacing(6),\n      paddingRight: 0\n    }),\n    mainGrid: {\n      marginTop: theme.spacing(3)\n    },\n    card: {\n      display: \"flex\"\n    },\n    cardDetails: {\n      flex: 1\n    },\n    subtext: (_subtext = {\n      fontFamily: 'Lora, \"Times New Roman\", Times, Baskerville, Georgia, serif',\n      fontSize: \"18px\",\n      minHeight: \"25.6px\"\n    }, _defineProperty(_subtext, theme.breakpoints.down(\"md\"), {\n      fontSize: \"12px\"\n    }), _defineProperty(_subtext, \"margin\", 0), _defineProperty(_subtext, \"marginLeft\", \"3px\"), _subtext),\n    cardMedia: {\n      width: 160\n    },\n    hot: {\n      color: \"#00ffe7\"\n    },\n    markdown: _objectSpread({}, theme.typography.body2, {\n      padding: theme.spacing(3, 0)\n    }),\n    sidebarAboutBox: {\n      padding: theme.spacing(2),\n      backgroundColor: theme.palette.grey[200]\n    },\n    sidebarSection: {\n      marginTop: theme.spacing(3)\n    },\n    footer: {\n      backgroundColor: theme.palette.background.paper,\n      marginTop: theme.spacing(8),\n      padding: theme.spacing(6, 0)\n    },\n    mainCat: {\n      fontWeight: \"400\"\n    },\n    gitem: _defineProperty({\n      padding: \"2px !important\"\n    }, theme.breakpoints.up(\"sm\"), {\n      padding: \"16px !important\"\n    }),\n    grid: _defineProperty({\n      paddingLeft: \"5px\",\n      paddingRight: \"5px\"\n    }, theme.breakpoints.up(\"sm\"), {\n      paddingLeft: \"20px\",\n      paddingRight: \"20px\"\n    }),\n    left: (_left = {}, _defineProperty(_left, theme.breakpoints.up(\"sm\"), {\n      display: \"block\"\n    }), _defineProperty(_left, \"display\", \"none\"), _defineProperty(_left, \"width\", \"350px\"), _defineProperty(_left, \"flex\", \"none\"), _left),\n    right: (_right = {}, _defineProperty(_right, theme.breakpoints.up(\"sm\"), {\n      width: 'calc(100% - 350px)'\n    }), _defineProperty(_right, \"width\", '100%'), _right),\n    cont: {\n      display: \"flex\",\n      flexDirection: \"row\"\n    },\n    city: {\n      textTransform: \"capitalize\"\n    },\n    pagination: {\n      marginTop: '30px',\n      marginBottom: '50px',\n      textAlign: 'right',\n      borderTop: '1px solid silver',\n      padding: '5px'\n    }\n  };\n});\n\nfunction Posts(props) {\n  var _useContext = useContext(ContextProvider),\n      config = _useContext.config;\n\n  var _useState = useState({\n    next: true,\n    previous: true\n  }),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var classes = useStyles();\n  var acount = props.page * 100;\n  var router = useRouter();\n  var slug = router.query.slug;\n\n  var capitalize = function capitalize(s) {\n    if (typeof s !== 'string') return '';\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  };\n\n  var catindex = slug[0];\n  var keyindex = slug[1];\n  var category = props.categories.find(function (e) {\n    return e.catindex === catindex;\n  }); //  }\n  //if(props.query.keyindex){\n\n  var subcat = props.categories.find(function (e) {\n    return e.keyindex === keyindex;\n  });\n  var pLock = router.pathname;\n\n  if (catindex) {\n    pLock += \"/\".concat(catindex);\n  }\n\n  if (keyindex) {\n    pLock += \"/\".concat(keyindex);\n  }\n\n  if (props.city) {\n    pLock += \"?city=\".concat(props.city);\n  } // if(keyindex){\n  //  pLock = `/${catindex}/${keyindex}`\n  // } else {\n  //    pLock = `/${catindex}`\n  // }\n  // var cty;\n  // if (props.city){\n  //   cty = `&city=${props.city}`\n  // }\n\n\n  if (category) {\n    var cat = category.maincategory;\n  } else {\n    var cat = \"All Posts\";\n  }\n\n  var sub = \"All Posts in \".concat(config.COUNTRYCODE);\n  return __jsx(Layout, {\n    user: props.user,\n    categories: props.categories,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, __jsx(Paper, {\n    className: classes.mainFeaturedPost,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, __jsx(Container, {\n    maxWidth: \"xl\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    style: {\n      display: \"none\"\n    },\n    src: \"https://source.unsplash.com/user/erondu\",\n    alt: \"background\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: classes.overlay,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241\n    },\n    __self: this\n  }), __jsx(Grid, {\n    container: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    md: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.mainFeaturedPostContent,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244\n    },\n    __self: this\n  }, __jsx(\"h1\", {\n    className: classes.sitename,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246\n    },\n    __self: this\n  }, \" \", subcat ? __jsx(\"span\", {\n    className: classes.hot,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248\n    },\n    __self: this\n  }, subcat.subcategory) : __jsx(\"span\", {\n    className: classes.hot,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249\n    },\n    __self: this\n  }, cat), props.city ? __jsx(\"span\", {\n    className: classes.city,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250\n    },\n    __self: this\n  }, \" \", \" \", \" \", capitalize(props.city)) : ''), subcat ? __jsx(\"p\", {\n    className: classes.subtext,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253\n    },\n    __self: this\n  }, category.maincategory) : __jsx(\"p\", {\n    className: classes.subtext,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253\n    },\n    __self: this\n  }, \" \")))))), __jsx(Breadcrumbs, {\n    query: props.query,\n    categories: props.categories,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259\n    },\n    __self: this\n  }), __jsx(Container, {\n    maxWidth: \"xl\",\n    className: classes.cont,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.left,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: classes.filter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268\n    },\n    __self: this\n  }, __jsx(LocationMenu, {\n    cities: props.cities,\n    catindex: catindex,\n    keyindex: keyindex,\n    city: props.city,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    className: classes.right,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274\n    },\n    __self: this\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 4,\n    className: classes.grid,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    md: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277\n    },\n    __self: this\n  }, __jsx(Divider, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279\n    },\n    __self: this\n  })), props.posts.rows ? props.posts.rows.map(function (post) {\n    return __jsx(Grid, {\n      className: classes.gitem,\n      item: true,\n      key: post.id,\n      xs: 12,\n      sm: 6,\n      md: 4,\n      lg: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, __jsx(PostPreview, {\n      post: post,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }));\n  }) : ''), __jsx(\"div\", {\n    className: classes.pagination,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290\n    },\n    __self: this\n  }, props.page > 1 ? __jsx(Link, {\n    href: \"/posts\".concat(pLock),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292\n    },\n    __self: this\n  }, \"First page\")) : '', props.page > 1 ? __jsx(\"button\", {\n    onClick: function onClick() {\n      return router.push(\"\".concat(pLock, \"&page=\").concat(props.page - 1));\n    },\n    disabled: props.page <= 1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295\n    },\n    __self: this\n  }, \"PREV\") : '', props.posts.count > acount ? __jsx(\"button\", {\n    onClick: function onClick() {\n      return router.push(\"\".concat(pLock, \"&page=\").concat(props.page + 1));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301\n    },\n    __self: this\n  }, \"NEXT\") : ''))));\n}\n\nPosts.getInitialProps = function _callee(_ref) {\n  var query, API, COUNTRYCODE, city, _query$page, page, url, res, data, urlb, resb, cities;\n\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          query = _ref.query;\n          // const res = await fetch('http://localhost:3000/api/posts/latest');\n          API = config.API, COUNTRYCODE = config.COUNTRYCODE;\n          city = query.city, _query$page = query.page, page = _query$page === void 0 ? 1 : _query$page; //   let page = 1\n          //  if(query.page){\n          //   page = query.page\n          //  } \n\n          url = \"\".concat(API, \"/getposts?countrycode=\").concat(COUNTRYCODE);\n\n          if (query.catindex) {\n            url += \"&catindex=\".concat(query.catindex);\n          }\n\n          if (query.keyindex) {\n            url += \"&keyindex=\".concat(query.keyindex);\n          }\n\n          if (city) {\n            url += \"&city=\".concat(city);\n          }\n\n          if (page) {\n            url += \"&page=\".concat(page);\n          }\n\n          _context.next = 10;\n          return _regeneratorRuntime.awrap(fetch(url));\n\n        case 10:\n          res = _context.sent;\n          _context.next = 13;\n          return _regeneratorRuntime.awrap(res.json());\n\n        case 13:\n          data = _context.sent;\n          urlb = \"\".concat(API, \"/getcities/\").concat(COUNTRYCODE);\n          _context.next = 17;\n          return _regeneratorRuntime.awrap(fetch(urlb));\n\n        case 17:\n          resb = _context.sent;\n          _context.next = 20;\n          return _regeneratorRuntime.awrap(resb.json());\n\n        case 20:\n          cities = _context.sent;\n          return _context.abrupt(\"return\", {\n            posts: data,\n            cities: cities,\n            page: _parseInt(page, 10),\n            city: city,\n            query: query\n          });\n\n        case 22:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default withAuth(Posts); // const Posts = () => {\n//   const router = useRouter();\n//   const { slug } = router.query;\n//   console.log(slug);\n//   return (\n//     <Layout>\n//       <p>\n//         {/* Category: {slug[0]}, Sub: {slug[1]} */}\n//       </p>\n//     </Layout>\n//   );\n// };\n// export default Posts;","map":{"version":3,"sources":["C:/src/hottofindtest/pages/posts/[...slug].js"],"names":["useRouter","Container","Divider","Grid","Link","Paper","makeStyles","Typography","React","useState","Layout","PostAccordian","Breadcrumbs","PostPreview","LocationMenu","withAuth","config","useStyles","theme","toolbar","borderBottom","palette","divider","toolbarTitle","flex","toolbarSecondary","justifyContent","overflowX","toolbarLink","padding","spacing","flexShrink","sitename","fontSize","lineHeight","marginBottom","breakpoints","down","mainFeaturedPost","position","backgroundColor","grey","color","common","white","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","overlay","top","bottom","right","left","mainFeaturedPostContent","up","paddingRight","mainGrid","marginTop","card","display","cardDetails","subtext","fontFamily","minHeight","cardMedia","width","hot","markdown","typography","body2","sidebarAboutBox","sidebarSection","footer","background","paper","mainCat","fontWeight","gitem","grid","paddingLeft","cont","flexDirection","city","textTransform","pagination","textAlign","borderTop","Posts","props","useContext","ContextProvider","next","previous","data","setData","classes","acount","page","router","slug","query","capitalize","s","charAt","toUpperCase","slice","catindex","keyindex","category","categories","find","e","subcat","pLock","pathname","cat","maincategory","sub","COUNTRYCODE","user","subcategory","filter","cities","posts","rows","map","post","id","push","count","getInitialProps","API","url","fetch","res","json","urlb","resb"],"mappings":"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","sourcesContent":["import { useRouter } from \"next/router\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport React, { useState } from 'react';\r\nimport Layout from \"../../components/layout\";\r\nimport PostAccordian from \"../../components/postAccordian\";\r\nimport Breadcrumbs from \"../../components/breadcrumbs\";\r\nimport PostPreview from \"../../components/postPreview\";\r\nimport LocationMenu from \"../../components/LocationMenu\";\r\nimport { withAuth } from \"../../utils/auth\";\r\n\r\n\r\n\r\nimport config from \"../../config\";\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  toolbar: {\r\n    borderBottom: `1px solid ${theme.palette.divider}`\r\n  },\r\n  toolbarTitle: {\r\n    flex: 1\r\n  },\r\n  toolbarSecondary: {\r\n    justifyContent: \"space-between\",\r\n    overflowX: \"auto\"\r\n  },\r\n  toolbarLink: {\r\n    padding: theme.spacing(1),\r\n    flexShrink: 0\r\n  },\r\n  sitename: {\r\n    fontSize: \"46px\",\r\n    lineHeight: \"40px\",\r\n    marginBottom: \"0\",\r\n    [theme.breakpoints.down(\"md\")]: {\r\n      fontSize: \"30px\",\r\n      lineHeight: \"35px\"\r\n    }\r\n  },\r\n  mainFeaturedPost: {\r\n    position: \"relative\",\r\n    backgroundColor: theme.palette.grey[800],\r\n    color: theme.palette.common.white,\r\n    marginBottom: 0,\r\n    backgroundImage: \"url(https://source.unsplash.com/user/erondu)\",\r\n    backgroundSize: \"cover\",\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundPosition: \"center\"\r\n  },\r\n  overlay: {\r\n    position: \"absolute\",\r\n    top: 0,\r\n    bottom: 0,\r\n    right: 0,\r\n    left: 0,\r\n    backgroundColor: \"rgba(0,0,0,.3)\"\r\n  },\r\n  mainFeaturedPostContent: {\r\n    position: \"relative\",\r\n    padding: theme.spacing(3),\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      padding: theme.spacing(6),\r\n      paddingRight: 0\r\n    }\r\n  },\r\n  mainGrid: {\r\n    marginTop: theme.spacing(3)\r\n  },\r\n  card: {\r\n    display: \"flex\"\r\n  },\r\n  cardDetails: {\r\n    flex: 1\r\n  },\r\n  subtext: {\r\n    fontFamily: 'Lora, \"Times New Roman\", Times, Baskerville, Georgia, serif',\r\n    fontSize: \"18px\",\r\n    minHeight: \"25.6px\",\r\n    [theme.breakpoints.down(\"md\")]: {\r\n      fontSize: \"12px\",\r\n    },\r\n    margin:0,\r\n    marginLeft: \"3px\"\r\n  },\r\n  cardMedia: {\r\n    width: 160\r\n  },\r\n  hot: {\r\n    color: \"#00ffe7\"\r\n  },\r\n  markdown: {\r\n    ...theme.typography.body2,\r\n    padding: theme.spacing(3, 0)\r\n  },\r\n  sidebarAboutBox: {\r\n    padding: theme.spacing(2),\r\n    backgroundColor: theme.palette.grey[200]\r\n  },\r\n  sidebarSection: {\r\n    marginTop: theme.spacing(3)\r\n  },\r\n  footer: {\r\n    backgroundColor: theme.palette.background.paper,\r\n    marginTop: theme.spacing(8),\r\n    padding: theme.spacing(6, 0)\r\n  },\r\n  mainCat: {\r\nfontWeight: \"400\"\r\n  },\r\n  gitem: {\r\n    padding:\"2px !important\",\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      padding:\"16px !important\",\r\n    }\r\n\r\n  },\r\n  grid: {\r\n    paddingLeft:\"5px\",\r\n    paddingRight: \"5px\",\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      paddingLeft:\"20px\",\r\n      paddingRight: \"20px\"\r\n    }\r\n  },\r\n  left: {\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      display: \"block\"\r\n    },\r\n    display: \"none\",\r\n    width: \"350px\",\r\n    flex: \"none\"\r\n    \r\n    \r\n  },\r\n  right: {\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n    width: 'calc(100% - 350px)'\r\n    },\r\n    width: '100%'\r\n  },\r\n  cont: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\" \r\n  },\r\n  city: {\r\n    textTransform: \"capitalize\"\r\n  },\r\n  pagination: {\r\n    marginTop: '30px',\r\n    marginBottom: '50px',\r\n    textAlign: 'right',\r\n    borderTop: '1px solid silver',\r\n    padding: '5px'\r\n  }\r\n}));\r\n\r\n\r\n\r\nfunction Posts(props) {\r\n  const {config} = useContext(ContextProvider);\r\n \r\n  const [data, setData] = useState({next: true, previous: true })\r\n\r\n  const classes = useStyles();\r\n\r\n  const acount = props.page * 100\r\n\r\n\r\n\r\n  const router = useRouter();\r\n  const { slug } = router.query;\r\n\r\n  const capitalize = (s) => {\r\n    if (typeof s !== 'string') return ''\r\n    return s.charAt(0).toUpperCase() + s.slice(1)\r\n  }\r\n\r\n  const catindex = slug[0]\r\n  const keyindex = slug[1]\r\n\r\n\r\n  const category = props.categories.find(\r\n    e => e.catindex === catindex\r\n  );\r\n\r\n  //  }\r\n  //if(props.query.keyindex){\r\n  const subcat = props.categories.find(\r\n    e => e.keyindex === keyindex\r\n  );\r\n\r\n  var pLock = router.pathname\r\n\r\n\r\n  if (catindex ){pLock += `/${catindex}` }\r\n      if(keyindex){ pLock +=  `/${keyindex}` } \r\n      if(props.city){ \r\n        \r\n        pLock += `?city=${props.city}` }\r\n  \r\n     \r\n\r\n\r\n  // if(keyindex){\r\n  //  pLock = `/${catindex}/${keyindex}`\r\n  // } else {\r\n  //    pLock = `/${catindex}`\r\n  // }\r\n\r\n  // var cty;\r\n\r\n  // if (props.city){\r\n  //   cty = `&city=${props.city}`\r\n  // }\r\n\r\n  if(category){\r\n  var cat = category.maincategory}\r\n  else { var cat = \"All Posts\"}\r\n\r\n  var sub = `All Posts in ${config.COUNTRYCODE}`\r\n\r\n\r\n  return (\r\n    <Layout user={props.user} categories={props.categories}>\r\n      {/* Main featured post */}\r\n      <Paper className={classes.mainFeaturedPost}>\r\n        <Container maxWidth=\"xl\">\r\n          {/* Increase the priority of the hero background image */}\r\n          {\r\n            <img\r\n              style={{ display: \"none\" }}\r\n              src=\"https://source.unsplash.com/user/erondu\"\r\n              alt=\"background\"\r\n            />\r\n          }\r\n          <div className={classes.overlay} />\r\n          <Grid container>\r\n            <Grid item md={6}>\r\n              <div className={classes.mainFeaturedPostContent}>\r\n\r\n                <h1 className={classes.sitename}>\r\n                  {\" \"}\r\n                  {subcat ? <span className={classes.hot}>{subcat.subcategory}</span> :\r\n                   <span className={classes.hot}>{cat}</span> }\r\n                   {props.city ? <span className={classes.city}> {\" \"} {capitalize(props.city)}</span> : ''  }\r\n                  \r\n                </h1>\r\n                {subcat ? <p className={classes.subtext}>{category.maincategory}</p> : <p className={classes.subtext}>{\" \"}</p> }\r\n              </div>\r\n            </Grid>\r\n          </Grid>\r\n        </Container>\r\n      </Paper>\r\n      <Breadcrumbs\r\n          query={props.query}\r\n          categories={props.categories}\r\n        />\r\n      {/* End main featured post */}\r\n      {/* Sub featured posts */}\r\n      <Container maxWidth=\"xl\" className={classes.cont}>\r\n        <div className={classes.left}>\r\n\r\n<div className={classes.filter}>\r\n{/* <PostAccordian categories={props.categories} catindex={catindex} keyindex={keyindex}  /> */}\r\n<LocationMenu cities={props.cities} catindex={catindex} keyindex={keyindex} city={props.city} />\r\n</div>\r\n\r\n        </div>\r\n        <div className={classes.right}>\r\n\r\n        <Grid container spacing={4} className={classes.grid}>\r\n        <Grid item xs={12} md={12}>\r\n          {/* <h2>Latest Posts</h2> */}\r\n            <Divider />\r\n  \r\n          </Grid>\r\n          {props.posts.rows ? props.posts.rows.map(post => (\r\n            <Grid className={classes.gitem} item key={post.id} xs={12} sm={6} md={4} lg={3}>\r\n            <PostPreview post={post} /> \r\n\r\n            </Grid>\r\n          )) : '' }\r\n        </Grid>\r\n        {/* End sub featured posts */}\r\n        <div className={classes.pagination}>\r\n        {props.page > 1  ? <Link href={`/posts${pLock}`}>\r\n          <a>First page</a>\r\n        </Link>\r\n        : '' } \r\n        {props.page > 1 ? <button\r\n          onClick={() => router.push(`${pLock}&page=${props.page - 1}`)}\r\n          disabled={props.page <= 1}\r\n        >\r\n          PREV\r\n        </button> : '' }\r\n        {props.posts.count > acount ? <button onClick={() => router.push(`${pLock}&page=${props.page + 1}`)}>\r\n          NEXT\r\n        </button> : '' }\r\n</div>\r\n        </div>\r\n      </Container>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nPosts.getInitialProps = async ({ query }) => {\r\n    // const res = await fetch('http://localhost:3000/api/posts/latest');\r\n\r\nconst {API, COUNTRYCODE} = config;\r\nconst {city, page = 1} = query\r\n\r\n\r\n  //   let page = 1\r\n  //  if(query.page){\r\n  //   page = query.page\r\n  //  } \r\n\r\n  \r\n \r\n    \r\n\r\n\r\n    let url = `${API}/getposts?countrycode=${COUNTRYCODE}`\r\n\r\n    if (query.catindex){\r\n      url += `&catindex=${query.catindex}`\r\n  }\r\n  if (query.keyindex){\r\n    url += `&keyindex=${query.keyindex}`\r\n}\r\n\r\nif(city) {\r\n  url += `&city=${city}`\r\n}\r\n\r\nif (page){\r\n  url += `&page=${page}`\r\n}\r\n    \r\n   \r\n    const res = await fetch(url);\r\n      let data = await res.json();\r\n\r\n      const urlb = `${API}/getcities/${COUNTRYCODE}`\r\n      const resb = await fetch(urlb);\r\n        let cities = await resb.json();\r\n  \r\n\r\n      return { posts: data, cities: cities, page: parseInt(page, 10), city: city, query: query }\r\n\r\n};\r\n\r\nexport default withAuth(Posts);\r\n\r\n\r\n// const Posts = () => {\r\n//   const router = useRouter();\r\n//   const { slug } = router.query;\r\n\r\n//   console.log(slug);\r\n\r\n//   return (\r\n//     <Layout>\r\n//       <p>\r\n//         {/* Category: {slug[0]}, Sub: {slug[1]} */}\r\n//       </p>\r\n//     </Layout>\r\n//   );\r\n// };\r\n\r\n// export default Posts;\r\n"]},"metadata":{},"sourceType":"module"}